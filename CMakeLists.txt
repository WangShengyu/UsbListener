PROJECT(UsbListener)
CMAKE_MINIMUM_REQUIRED(VERSION 3.5)
ADD_DEFINITIONS(-DWIN32_LEAN_AND_MEAN)

IF(NOT LIBRARY_OUTPUT_PATH)
    MESSAGE(STATUS "Set LIBRARY_OUTPUT_PATH: ${PROJECT_BINARY_DIR}.")
    SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)
ENDIF() 
IF(NOT EXECUTABLE_OUTPUT_PATH)
    MESSAGE(STATUS "Set EXECUTABLE_OUTPUT_PATH: ${PROJECT_BINARY_DIR}")
    SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
ENDIF()

SET(PROJECT_ROOT_DIR ${PROJECT_SOURCE_DIR})
SET(PROJECT_SOURCE_DIR ${PROJECT_SOURCE_DIR}/src)

# For generating pdb file.
add_compile_options($<$<CXX_COMPILER_ID:MSVC>:/Zi>)
# To compile with multiple cores.
add_compile_options($<$<CXX_COMPILER_ID:MSVC>:/MP>)
# Treats all compiler warnings as errors
add_compile_options($<$<CXX_COMPILER_ID:MSVC>:/WX>)
# Specifies the level of warnings to be generated by the compiler. Valid warning levels range from 0 to 4:
# - /W0 disables all warnings.
# - /W1 displays level 1 (severe) warnings. /W1 is the default setting.
# - /W2 displays level 1 and level 2 (significant) warnings.
# - /W3 displays level 1, level 2 and level 3 (production quality) warnings.
# - /W4 displays level 1, level 2, and level 3 warnings, and all level 4 (informational) warnings that are not turned off by default. We recommend that you use this option only to provide lint-like warnings. However, for a new project, it may be best to use /W4 in all compilations; this will ensure the fewest possible hard-to-find code defects.
add_compile_options($<$<CXX_COMPILER_ID:MSVC>:/W3>)

ADD_DEFINITIONS("-D_WIN32_WINNT=0x0600")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4018") # 'expression' : signed/unsigned mismatch
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4146") # unary minus operator applied to unsigned type, result still unsigned
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4244") # Conversion from 'type1' to 'type2', possible loss of data.
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4251") # 'identifier' : class 'type' needs to have dll-interface to be used by clients of class 'type2'
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4267") # Conversion from 'size_t' to 'type', possible loss of data.
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4305") # 'identifier' : truncation from 'type1' to 'type2'
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4355") # 'this' : used in base member initializer list
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4800") # 'type' : forcing value to bool 'true' or 'false' (performance warning)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4996") # 'function': was declared deprecated
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /wd4819") # 该文件包含不能在当前代码页(936)

ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(sample)
